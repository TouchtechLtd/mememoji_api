{"version":3,"sources":["webpack:///./src/actions/app.js","webpack:///./src/styles/main.css?587f","webpack:///./src/index.jsx","webpack:///./src/reducers/index.js","webpack:///./src/reducers/app.js","webpack:///./src/reducers/todos.js","webpack:///./src/utils/todos.js","webpack:///./src/utils/tools.js","webpack:///./src/actions/todos.js","webpack:///./src/reducers/mocks.js","webpack:///./src/actions/mocks.js","webpack:///./src/api/mocks.js","webpack:///./src/store.js","webpack:///./src/containers/ContentProvider.jsx","webpack:///./src/content/index.js","webpack:///./src/content/en.yaml","webpack:///./src/content/es.yaml","webpack:///./src/containers/App.jsx","webpack:///./src/utils/bounds.js","webpack:///./src/components/EmotionCapture.jsx","webpack:///./src/components/FacesMonitor.jsx","webpack:///./src/components/Face.jsx","webpack:///./src/components/Timeline.jsx","webpack:///./src/styles/main.css"],"names":["APP_SET_LANGUAGE","setLanguage","type","payload","lang","types","store","logger","document","getElementById","app","todos","mocks","INIT_STATE","language","appReducers","state","ADD_TODO","TOGGLE_TODO","SET_FILTER","filter","all","list","todosReducers","meta","id","FILTER_TYPES","ACTIVE","active","COMPLETED","completed","filters","t","serializeTodo","text","getVisibleTodos","addTodo","todo","toggleTodo","map","validate","Promise","resolve","reject","condition","execute","commandName","options","command","commands","Enum","args","value","setFilter","fetching","enitity","FETCH_USERS_INIT","FETCH_USERS_COMMIT","FETCH_USERS_ROLLBACK","FETCH_POSTS_INIT","FETCH_POSTS_COMMIT","FETCH_POSTS_ROLLBACK","FETCH_ALBUMS_INIT","FETCH_ALBUMS_COMMIT","FETCH_ALBUMS_ROLLBACK","fetchInit","entity","fetchCommit","fetchRollback","error","mockReducers","fetchUsersInit","fetchUsersCommit","users","fetchUsersRollback","getUsers","dipatch","then","catch","fetchPostsInit","fetchPostsCommit","posts","fetchPostsRollback","getPosts","fetchAlbumsInit","fetchAlbumsCommit","albums","fetchAlbumsRollback","getAlbums","FAKER_API","jsonToQueryString","json","encodeURIComponent","key","join","getFake","fetch","schema","params","res","getPhotos","getTodos","reducers","devTools","middlewares","extensions","window","__REDUX_DEVTOOLS_EXTENSION__","dictionary","PARAMS_REG_EXP","paramsRegExp","RegExp","content","path","format","replace","replaceText","setDictionary","ContentProvider","props","getChildContext","componentWillReceiveProps","nextProps","shouldComponentUpdate","render","only","children","propTypes","string","defaultProps","childContextTypes","shape","isRequired","en","es","FACE_TIMEOUT","MainContainer","Container","App","facesHistory","onCapture","faces","time","Date","getTime","facesWithId","reduce","result","face","faceCenter","x","width","y","height","currentBounds","location_xy","faceId","lastValue","prevBounds","undefined","initValue","push","setState","dispatch","checkMin","min","checkMax","max","checkMinMax","checkBounds","bounds1","bounds2","checkMinMaxX","checkMinMaxY","FaceId","top","left","CHECK_TIME","EmotionCapture","constraints","audio","setCanvas","ref","canvas","setVideo","video","setContainer","container","checkEmotions","takePicture","toBlob","blob","data","FormData","append","method","body","console","log","err","context","getContext","drawImage","startTracking","interval","setInterval","stopTracking","clearInterval","preview","index","getBoundingClientRect","getUserMedia","successCallback","errorCallback","navigator","webkitGetUserMedia","call","stream","vendorURL","URL","webkitURL","src","createObjectURL","play","Faces","FacesMonitor","getColor","progress","Emotions","Label","BarContainer","Bar","backgroundColor","Face","prediction","thumbnail","emotion","percent","Timeline","current","generateData","history","faceHistory","initialTime","ev","target","Object","keys","right","bottom","r"],"mappings":"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","file":"app.3ee3746b743e76a4c417.js","sourcesContent":["const APP_SET_LANGUAGE = 'APP_SET_LANGUAGE';\nconst setLanguage = lang => ({\n  type: APP_SET_LANGUAGE,\n  payload: lang,\n});\n\nconst types = { APP_SET_LANGUAGE };\n\nexport { types };\nexport default { setLanguage };\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/app.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/main.css\n// module id = 287\n// module chunks = 1","import 'whatwg-fetch';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport reducers from './reducers';\nimport createStore from './store';\nimport ContentProvider from './containers/ContentProvider';\nimport App from './containers/App';\nimport './styles/main.css';\n\nconst store = createStore(reducers, { logger: process.env.NODE_ENV === 'development' });\n\nrender(\n  <Provider store={store}>\n    <ContentProvider>\n      <App />\n    </ContentProvider>\n  </Provider>,\n  document.getElementById('app'),\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.jsx","import { combineReducers } from 'redux';\nimport app from './app';\nimport todos from './todos';\nimport mocks from './mocks';\n\nexport default combineReducers({ app, todos, mocks });\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/index.js","import processReducer from 'process-reducer';\nimport { types } from '../actions/app';\n\nconst { APP_SET_LANGUAGE } = types;\n\nconst INIT_STATE = { language: 'en' };\n\nconst appReducers = {\n  [APP_SET_LANGUAGE]: (state, { payload }) => ({ ...state, language: payload }),\n};\n\nexport default processReducer(appReducers, INIT_STATE);\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/app.js","import processReducer from 'process-reducer';\nimport { addTodo, toggleTodo, FILTER_TYPES } from '../utils/todos';\nimport { types } from '../actions/todos';\n\nconst { ADD_TODO, TOGGLE_TODO, SET_FILTER } = types;\nconst INIT_STATE = { filter: FILTER_TYPES.all, list: [] };\n\nconst todosReducers = {\n  [ADD_TODO]: (state, { payload }) => ({ ...state, list: addTodo(state.list, payload) }),\n  [TOGGLE_TODO]: (state, { meta }) => ({\n    ...state,\n    list: toggleTodo(state.list, meta.id),\n  }),\n  [SET_FILTER]: (state, { payload }) => ({ ...state, filter: payload }),\n};\n\nexport default processReducer(todosReducers, INIT_STATE);\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/todos.js","import { Enum } from './tools';\n\nconst FILTER_TYPES = Enum('all', 'active', 'completed');\n\nconst { active: ACTIVE, completed: COMPLETED } = FILTER_TYPES;\n\nconst filters = {\n  [COMPLETED]: todos => todos.filter(t => t.completed),\n  [ACTIVE]: todos => todos.filter(t => !t.completed),\n};\n\nconst serializeTodo = ({ id, text, completed = false }) => ({\n  id,\n  text,\n  completed,\n});\n\nconst getVisibleTodos = (todos = [], filter) => (filters[filter] ? filters[filter](todos) : todos);\n\nconst addTodo = (todos, todo) => [...todos, serializeTodo(todo)];\n\nconst toggleTodo = (todos, id) =>\n  todos.map(t => (t.id !== id ? t : { ...t, completed: !t.completed }));\n\nexport { FILTER_TYPES, getVisibleTodos, addTodo, toggleTodo };\nexport default { FILTER_TYPES, getVisibleTodos, addTodo, toggleTodo };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/todos.js","import { zipObject, snakeCase } from 'lodash';\n\nconst validate = condition => new Promise((resolve, reject) => (condition ? resolve() : reject()));\n\nconst execute = commands => (commandName, options) =>\n  new Promise((resolve, reject) => {\n    const command = commands[commandName];\n    if (command) {\n      resolve(command(options));\n    } else {\n      reject(commandName, options);\n    }\n  });\n\nconst Enum = (...args) => zipObject(args.map(value => snakeCase(value)), args);\n\nexport { validate, execute, Enum };\nexport default { validate, execute, Enum };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/tools.js","import uuid from 'uuid/v1';\n\nconst ADD_TODO = 'ADD_TODO';\nconst addTodo = text => ({\n  type: ADD_TODO,\n  payload: {\n    id: uuid(),\n    text,\n  },\n});\n\nconst SET_FILTER = 'SET_FILTER';\nconst setFilter = filter => ({\n  type: SET_FILTER,\n  payload: filter,\n});\n\nconst TOGGLE_TODO = 'TOGGLE_TODO';\nconst toggleTodo = id => ({\n  type: TOGGLE_TODO,\n  meta: { id },\n});\n\nconst types = { ADD_TODO, SET_FILTER, TOGGLE_TODO };\n\nexport { types, addTodo, setFilter, toggleTodo };\n\nexport default { types, addTodo, setFilter, toggleTodo };\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/todos.js","import processReducer from 'process-reducer';\nimport { types } from '../actions/mocks';\n\nconst INIT_STATE = { fetching: false, enitity: '', list: [] };\n\nconst {\n  FETCH_USERS_INIT,\n  FETCH_USERS_COMMIT,\n  FETCH_USERS_ROLLBACK,\n  FETCH_POSTS_INIT,\n  FETCH_POSTS_COMMIT,\n  FETCH_POSTS_ROLLBACK,\n  FETCH_ALBUMS_INIT,\n  FETCH_ALBUMS_COMMIT,\n  FETCH_ALBUMS_ROLLBACK,\n} = types;\n\nconst fetchInit = entity => state => ({ ...state, fetching: true, entity });\nconst fetchCommit = (state, { payload }) => ({ ...state, fetching: false, list: payload });\nconst fetchRollback = (state, { meta }) => ({\n  ...state,\n  fetching: false,\n  error: meta.error,\n});\n\nconst mockReducers = {\n  [FETCH_USERS_INIT]: fetchInit('User'),\n  [FETCH_USERS_COMMIT]: fetchCommit,\n  [FETCH_USERS_ROLLBACK]: fetchRollback,\n  [FETCH_POSTS_INIT]: fetchInit('Posts'),\n  [FETCH_POSTS_COMMIT]: fetchCommit,\n  [FETCH_POSTS_ROLLBACK]: fetchRollback,\n  [FETCH_ALBUMS_INIT]: fetchInit('Albums'),\n  [FETCH_ALBUMS_COMMIT]: fetchCommit,\n  [FETCH_ALBUMS_ROLLBACK]: fetchRollback,\n};\n\nexport default processReducer(mockReducers, INIT_STATE);\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/mocks.js","import {\n  getUsers as getUsersApi,\n  getPosts as getPostsApi,\n  getAlbums as getAlbumsApi,\n} from '../api/mocks';\n\nconst FETCH_USERS_INIT = 'FETCH_USERS_INIT';\nconst fetchUsersInit = options => ({ type: FETCH_USERS_INIT, meta: { options } });\n\nconst FETCH_USERS_COMMIT = 'FETCH_USERS_COMMIT';\nconst fetchUsersCommit = users => ({\n  type: FETCH_USERS_COMMIT,\n  payload: users,\n});\n\nconst FETCH_USERS_ROLLBACK = 'FETCH_USERS_ROLLBACK';\nconst fetchUsersRollback = error => ({\n  type: FETCH_USERS_ROLLBACK,\n  meta: { error },\n});\n\nconst getUsers = options => (dipatch) => {\n  dipatch(fetchUsersInit(options));\n  getUsersApi()\n    .then(users => dipatch(fetchUsersCommit(users)))\n    .catch(error => dipatch(fetchUsersRollback(error)));\n};\n\nconst FETCH_POSTS_INIT = 'FETCH_POSTS_INIT';\nconst fetchPostsInit = options => ({ type: FETCH_POSTS_INIT, meta: { options } });\n\nconst FETCH_POSTS_COMMIT = 'FETCH_POSTS_COMMIT';\nconst fetchPostsCommit = posts => ({\n  type: FETCH_POSTS_COMMIT,\n  payload: posts,\n});\n\nconst FETCH_POSTS_ROLLBACK = 'FETCH_POSTS_ROLLBACK';\nconst fetchPostsRollback = error => ({\n  type: FETCH_POSTS_ROLLBACK,\n  meta: { error },\n});\n\nconst getPosts = options => (dipatch) => {\n  dipatch(fetchPostsInit(options));\n  getPostsApi()\n    .then(posts => dipatch(fetchPostsCommit(posts)))\n    .catch(error => dipatch(fetchPostsRollback(error)));\n};\n\nconst FETCH_ALBUMS_INIT = 'FETCH_ALBUMS_INIT';\nconst fetchAlbumsInit = options => ({ type: FETCH_ALBUMS_INIT, meta: { options } });\n\nconst FETCH_ALBUMS_COMMIT = 'FETCH_ALBUMS_COMMIT';\nconst fetchAlbumsCommit = albums => ({\n  type: FETCH_ALBUMS_COMMIT,\n  payload: albums,\n});\n\nconst FETCH_ALBUMS_ROLLBACK = 'FETCH_ALBUMS_ROLLBACK';\nconst fetchAlbumsRollback = error => ({\n  type: FETCH_ALBUMS_ROLLBACK,\n  meta: { error },\n});\n\nconst getAlbums = options => (dipatch) => {\n  dipatch(fetchAlbumsInit(options));\n  getAlbumsApi()\n    .then(albums => dipatch(fetchAlbumsCommit(albums)))\n    .catch(error => dipatch(fetchAlbumsRollback(error)));\n};\n\nconst types = {\n  FETCH_USERS_INIT,\n  FETCH_USERS_COMMIT,\n  FETCH_USERS_ROLLBACK,\n  FETCH_POSTS_INIT,\n  FETCH_POSTS_COMMIT,\n  FETCH_POSTS_ROLLBACK,\n  FETCH_ALBUMS_INIT,\n  FETCH_ALBUMS_COMMIT,\n  FETCH_ALBUMS_ROLLBACK,\n};\n\nexport { types, getUsers, getPosts, getAlbums };\n\nexport default { types, getUsers, getPosts, getAlbums };\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/mocks.js","// Using JSONPlaceholder\n// For more info: https://github.com/typicode/jsonplaceholder#how-to\nimport { keys } from 'lodash';\n\nconst FAKER_API = 'https://jsonplaceholder.typicode.com';\nconst jsonToQueryString = json =>\n  `?${keys(json)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(json[key])}`)\n    .join('&')}`;\n\nconst getFake = schema => params =>\n  fetch(`${FAKER_API}/${schema}?${jsonToQueryString(params)}`).then(res =>\n    res.json(),\n  );\n\nconst getUsers = getFake('users');\n\nconst getPosts = getFake('posts');\n\nconst getAlbums = getFake('albums');\n\nconst getPhotos = getFake('photos');\n\nconst getTodos = getFake('todos');\n\nexport { getUsers, getPosts, getAlbums, getPhotos, getTodos };\n\nexport default { getUsers, getPosts, getAlbums, getPhotos, getTodos };\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/mocks.js","import { compact } from 'lodash';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { persistStore, autoRehydrate } from 'redux-persist';\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk';\n\nexport default (reducers, options = { devTools: false, logger: false }) => {\n  const middlewares = compact([thunk, options.logger && logger]);\n  const extensions = compact([\n    options.devTools &&\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\n      window.__REDUX_DEVTOOLS_EXTENSION__(),\n    autoRehydrate(),\n    applyMiddleware(...middlewares),\n  ]);\n  const store = compose(...extensions)(createStore)(reducers);\n  persistStore(store);\n  return store;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","import { Component, Children } from 'react';\nimport { get } from 'lodash';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport dictionaries from '../content';\n\nlet dictionary = {};\nconst PARAMS_REG_EXP = '%{(.*?)}';\nconst paramsRegExp = new RegExp(PARAMS_REG_EXP, 'g');\n\nconst content = (path, options = {}) => {\n  const { format, params } = options;\n  const text = get(dictionary, path, '');\n  const value = params ? text.replace(paramsRegExp, (replaceText, key) => params[key]) : text;\n  return format ? format(value) : value;\n};\n\nconst setDictionary = (lang) => {\n  dictionary = dictionaries[lang];\n};\n\nclass ContentProvider extends Component {\n  static propTypes = {\n    lang: PropTypes.string,\n  };\n  static defaultProps = {\n    lang: 'en',\n  };\n  // you must specify what you’re adding to the context\n  static childContextTypes = {\n    content: PropTypes.shape({}).isRequired,\n  };\n  constructor(props) {\n    super(props);\n    setDictionary(props.lang);\n  }\n\n  getChildContext = () => ({ content: dictionary });\n\n  componentWillReceiveProps = nextProps => setDictionary(nextProps.lang);\n  shouldComponentUpdate = nextProps => this.props.lang !== nextProps.lang;\n  // `Children.only` enables us not to add a wrapping <div />\n  render = () => Children.only(this.props.children);\n}\n\nexport { content, setDictionary };\nexport default connect(({ app }) => ({ lang: app.language }))(ContentProvider);\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ContentProvider.jsx","import en from './en.yaml';\nimport es from './es.yaml';\n\nexport default { en, es };\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/index.js","module.exports = {\"app\":{\"title\":\"Application Demo\"},\"todo_list\":{\"title\":\"ToDo List\",\"filter\":\"Filters\"},\"mocks\":{\"fetching\":\"Fetching... %{entity}\"},\"assets\":{\"title\":\"Assets\",\"images\":\"Images\",\"icons\":\"Material icons\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/en.yaml\n// module id = 362\n// module chunks = 1","module.exports = {\"app\":{\"title\":\"Aplicación Demo\"},\"todo_list\":{\"title\":\"Lista de ToDos\",\"filter\":\"Filtros\"},\"mocks\":{\"fetching\":\"Cargando... %{entity}\"},\"assets\":{\"title\":\"Bienes\",\"images\":\"Imágenes\",\"icons\":\"Material icons\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/es.yaml\n// module id = 363\n// module chunks = 1","/**\n * Created by thram on 21/01/17.\n */\nimport React, { Component } from 'react';\n// Server rendering support\n// import { BrowserRouter as Router } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { reduce, last, uniqueId } from 'lodash';\nimport styled from 'emotion/react';\nimport { checkBounds } from '../utils/bounds';\nimport EmotionCapture from '../components/EmotionCapture';\nimport FacesMonitor from '../components/FacesMonitor';\nimport Timeline from '../components/Timeline';\nimport actions from '../actions/app';\nimport '../styles/main.css';\n\nconst FACE_TIMEOUT = 5000;\n\nconst MainContainer = styled.div({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  padding: '2rem',\n  display: 'flex',\n  flexDirection: 'column',\n});\nconst Container = styled.div({\n  display: 'flex',\n  flex: 1,\n});\n\nclass App extends Component {\n  state = { facesHistory: {} };\n  onCapture = (faces) => {\n    const time = new Date().getTime();\n    const facesWithId = [];\n    const facesHistory = faces.reduce((result, face) => {\n      const faceCenter = { x: face.width / 2, y: face.height / 2 };\n      const currentBounds = {\n        x: face.location_xy[0] + faceCenter.x,\n        y: face.location_xy[1] + faceCenter.y,\n      };\n      const faceId = reduce(\n        this.state.facesHistory,\n        (res, value, key) => {\n          const lastValue = last(value);\n          const prevBounds = {\n            x: lastValue.location_xy[0],\n            y: lastValue.location_xy[1],\n            width: lastValue.width,\n            height: lastValue.height,\n          };\n          return checkBounds(prevBounds, currentBounds) && time - lastValue.time < FACE_TIMEOUT\n            ? key\n            : res;\n        },\n        undefined,\n      );\n      const key = faceId || uniqueId('face_');\n      const initValue = result[key] || [];\n      facesWithId.push({ ...face, id: key });\n      return {\n        ...result,\n        [key]: [...initValue, { ...face, time }],\n      };\n    }, this.state.facesHistory);\n    this.setState({ faces: facesWithId, facesHistory });\n  };\n\n  render = () => (\n    <MainContainer>\n      <Container>\n        <EmotionCapture onCapture={this.onCapture} />\n        <FacesMonitor faces={this.state.faces} />\n      </Container>\n      <Timeline history={this.state.facesHistory} />\n    </MainContainer>\n  );\n}\n\nexport default connect(\n  ({ app }) => ({ ...app }),\n  dispatch => ({\n    setLanguage: lang => dispatch(actions.setLanguage(lang)),\n  }),\n)(App);\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/App.jsx","import { flow } from 'lodash';\n\nconst checkMin = min => value => (value < min ? min : value);\nconst checkMax = max => value => (value > max ? max : value);\nconst checkMinMax = (min, max) => flow(checkMin(min), checkMax(max));\n\nconst checkBounds = (bounds1, bounds2) => {\n  const min = { x: bounds1.x, y: bounds1.y };\n\n  const max = {\n    x: bounds1.x + bounds1.width,\n    y: bounds1.y + bounds1.height,\n  };\n  const checkMinMaxX = checkMinMax(min.x, max.x);\n  const checkMinMaxY = checkMinMax(min.y, max.y);\n  return {\n    x: checkMinMaxX(bounds2.x),\n    y: checkMinMaxY(bounds2.y),\n  };\n};\n\nexport { checkMin, checkMax, checkMinMax, checkBounds };\nexport default { checkMin, checkMax, checkMinMax, checkBounds };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/bounds.js","import React, { Component } from 'react';\nimport styled from 'emotion/react';\n\nconst Container = styled.div({ position: 'relative', flex: 1 });\nconst FaceId = styled.div(\n  { position: 'absolute', border: 'blue 2px solid' },\n  ({ x, y, width, height }) => ({\n    top: `${y}px`,\n    left: `${x}px`,\n    width: `${width}px`,\n    height: `${height}px`,\n  }),\n);\n\nconst CHECK_TIME = 1000;\n\nclass EmotionCapture extends Component {\n  state = {\n    faces: [],\n    constraints: { audio: false },\n  };\n\n  componentDidMount() {\n    const constraints = this.state.constraints;\n    const { width, height } = this.container.getBoundingClientRect();\n    this.height = height;\n    this.width = width;\n    const getUserMedia = params =>\n      new Promise((successCallback, errorCallback) =>\n        navigator.webkitGetUserMedia.call(navigator, params, successCallback, errorCallback),\n      );\n\n    getUserMedia({ ...constraints, video: { width, height } })\n      .then((stream) => {\n        const vendorURL = window.URL || window.webkitURL;\n        this.video.src = vendorURL.createObjectURL(stream);\n        this.video.play();\n        // this.checkEmotions();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  setCanvas = (ref) => {\n    if (ref) this.canvas = ref;\n  };\n  setVideo = (ref) => {\n    if (ref) this.video = ref;\n  };\n  setContainer = (ref) => {\n    if (ref) this.container = ref;\n  };\n  checkEmotions = () => {\n    this.takePicture();\n    // PREVIEW IMAGE FOR TESTING\n    // this.setState({ preview: this.canvas.toDataURL('image/png') });\n    this.canvas.toBlob((blob) => {\n      const data = new FormData();\n      data.append('image_buf', blob, 'emotion');\n      // const startTime = new Date().getTime();\n      fetch('/v1.0.0/predict', { method: 'POST', body: data })\n        .then(res => res.json())\n        .then(({ faces }) => {\n          // const endTime = new Date().getTime();\n          // console.log(endTime - startTime);\n          // console.log(faces);\n          if (this.props.onCapture) this.props.onCapture(faces);\n          // this.registerFaces(faces);\n          this.setState({ faces });\n        })\n        .catch(err => console.log(err));\n    });\n  };\n\n  takePicture = () => {\n    const context = this.canvas.getContext('2d');\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    context.drawImage(this.video, 0, 0, this.width, this.height);\n  };\n  startTracking = () => {\n    this.interval = setInterval(this.checkEmotions, CHECK_TIME);\n  };\n  stopTracking = () => {\n    clearInterval(this.interval);\n  };\n\n  render = () => (\n    <Container innerRef={this.setContainer}>\n      <video ref={this.setVideo} />\n      <canvas ref={this.setCanvas} hidden />\n      {this.state.preview && <img src={this.state.preview} />}\n      {this.state.faces.map(({ index, location_xy, width, height }, key) => (\n        <FaceId key={`face_id_${index}`} x={location_xy[0]} y={location_xy[1]} width={width} height={height}>\n          {key}\n        </FaceId>\n      ))}\n      <button onClick={this.startTracking}>Start Tracking</button>\n      <button onClick={this.stopTracking}>Stop Tracking</button>\n    </Container>\n  );\n}\n\nexport default EmotionCapture;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/EmotionCapture.jsx","import React from 'react';\nimport styled from 'emotion/react';\nimport Face from './Face';\n\nconst Faces = styled.div({ overflow: 'auto', flex: 1 });\n\nconst FacesMonitor = ({ faces = [] }) => (\n  <Faces>{faces.map(props => <Face key={`face_${props.index}`} {...props} />)}</Faces>\n);\n\nexport default FacesMonitor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FacesMonitor.jsx","import React from 'react';\nimport styled from 'emotion/react';\nimport { inRange, capitalize } from 'lodash';\n\nconst getColor = (progress = 0) => {\n  if (inRange(progress, 0.4)) return '#F04155';\n  if (inRange(progress, 0.4, 0.6)) return '#FF823A';\n  return '#248F8D';\n};\nconst Container = styled.div({ padding: '.5rem' });\nconst Emotions = styled.div({ display: 'flex', alignItems: 'center' });\nconst Label = styled.div({ fontWeight: 'bold', marginRight: '1rem', width: '60px' });\n\nconst BarContainer = styled.div({ backgroundColor: '#ddd', flex: 1 });\nconst Bar = styled.div(\n  {\n    height: '10px',\n    transition: 'all 500ms ease',\n    backgroundColor: '#ddd',\n  },\n  ({ value = 0 }) => ({ width: `${value * 100}%`, backgroundColor: getColor(value) }),\n);\n\nconst Face = ({ id, prediction, thumbnail }) => (\n  <Container>\n    <div>\n      <img src={thumbnail} alt=\"face\" />\n      {id}\n    </div>\n    {prediction.map(({ emotion, percent }) => (\n      <Emotions key={emotion}>\n        <Label>{capitalize(emotion)}</Label>\n        <BarContainer>\n          <Bar value={percent} />\n        </BarContainer>\n      </Emotions>\n    ))}\n  </Container>\n);\n\nexport default Face;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Face.jsx","import React, { Component } from 'react';\nimport { Label, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\nimport { reduce, first } from 'lodash';\nimport styled from 'emotion/react';\n\nconst Container = styled.div({ flex: 1 });\n\nclass Timeline extends Component {\n  state = { current: 'face_1' };\n\n  generateData = (id) => {\n    const { history } = this.props;\n    // const emotion = 'sad';\n    const data = reduce(\n      history,\n      (result, faceHistory, faceId) => {\n        let initialTime;\n        return {\n          ...result,\n          [faceId]: faceHistory.map((face) => {\n            if (!initialTime) initialTime = face.time;\n            return {\n              time: face.time - initialTime,\n              percent: 100,\n              ...face.prediction.reduce(\n                (res, { emotion, percent }) => ({ ...res, [emotion]: percent * 100 }),\n                {},\n              ),\n            };\n          }),\n        };\n      },\n      {},\n    );\n    return data[id];\n  };\n\n  render = () => (\n    <Container>\n      <h1>{this.state.current}</h1>\n      <select\n        value={this.state.current}\n        onChange={ev => this.setState({ current: ev.target.value })}\n      >\n        {Object.keys(this.props.history).map(key => <option key={`option_${key}`}>{key}</option>)}\n      </select>\n      <LineChart\n        width={600}\n        height={300}\n        data={this.generateData(this.state.current)}\n        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\n      >\n        <XAxis type=\"number\" dataKey=\"time\">\n          <Label value=\"ms\" position=\"insideBottom\" />\n        </XAxis>\n        <YAxis type=\"number\" unit=\"%\" dataKey=\"percent\">\n          <Label value=\"%\" position=\"insideLeft\" angle={90} />\n        </YAxis>\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <Tooltip />\n        <Legend />\n        <Line type=\"monotone\" dataKey=\"angry\" stroke=\"#CC0C39\" activeDot={{ r: 8 }} />\n        <Line type=\"monotone\" dataKey=\"fear\" stroke=\"#215A6D\" activeDot={{ r: 8 }} />\n        <Line type=\"monotone\" dataKey=\"happy\" stroke=\"#92C7A3\" activeDot={{ r: 8 }} />\n        <Line type=\"monotone\" dataKey=\"neutral\" stroke=\"#EB613B\" activeDot={{ r: 8 }} />\n        <Line type=\"monotone\" dataKey=\"sad\" stroke=\"#2D2D29\" activeDot={{ r: 8 }} />\n        <Line type=\"monotone\" dataKey=\"surprise\" stroke=\"#C8CF02\" activeDot={{ r: 8 }} />\n      </LineChart>\n    </Container>\n  );\n}\n\nexport default Timeline;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Timeline.jsx","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/icon?family=Material+Icons);\", \"\"]);\n\n// module\nexports.push([module.id, \"html {\\n  box-sizing: border-box;\\n}\\n\\n*,\\n*:before,\\n*:after {\\n  box-sizing: inherit;\\n}\\n\\n.material-icons {\\n  cursor: default;\\n  font-family: \\\"Material Icons\\\";\\n  font-weight: normal;\\n  font-style: normal;\\n  font-size: 24px;\\n  /* Preferred icon size */\\n  display: inline-block;\\n  line-height: 1;\\n  text-transform: none;\\n  letter-spacing: normal;\\n  word-wrap: normal;\\n  white-space: nowrap;\\n  direction: ltr;\\n  /* Support for all WebKit browsers. */\\n  -webkit-font-smoothing: antialiased;\\n  /* Support for Safari and Chrome. */\\n  text-rendering: optimizeLegibility;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  /* Support for Firefox. */\\n  -moz-osx-font-smoothing: grayscale;\\n  -moz-user-select: none;\\n  /* Support for IE. */\\n  font-feature-settings: \\\"liga\\\";\\n  -ms-user-select: none;\\n  /* Safari */\\n  /* Konqueror HTML */\\n  -khtml-user-select: none;\\n  user-select: none;\\n}\\n\\n.pure-button-success,\\n.pure-button-error,\\n.pure-button-warning,\\n.pure-button-secondary {\\n  color: white;\\n  border-radius: 4px;\\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\\n}\\n\\n.pure-button-success {\\n  background: rgb(28, 184, 65); /* this is a green */\\n}\\n\\n.pure-button-error {\\n  background: rgb(202, 60, 60); /* this is a maroon */\\n}\\n\\n.pure-button-warning {\\n  background: rgb(223, 117, 20); /* this is an orange */\\n}\\n\\n.pure-button-secondary {\\n  background: rgb(66, 184, 221); /* this is a light blue */\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./src/styles/main.css\n// module id = 701\n// module chunks = 1"],"sourceRoot":""}